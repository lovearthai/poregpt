# config.yaml
# Nanopore 信号 CNN 模型训练配置文件

# 数据相关配置
data:
  # 输入目录：包含预处理好的 .npy 信号片段文件
  npy_dir: "/mnt/nas_syy/default/poregpt/shared/dataset/dna/human_min0_max2_read96655/memap/train"
  # 可选：独立验证集目录
  val_dataset_path: "/mnt/nas_syy/default/poregpt/shared/dataset/dna/human_min0_max2_read96655/memap/validation"

# 训练相关配置
training:
  # 输出模型保存路径
  output_model_path: "models/nanopore_signal_tokenizer.pth"
  # 训练批大小
  batch_size: 256
  # 学习率
  lr: 0.0002
  # 训练轮数
  num_epochs: 200
  # 每个 .npy 文件的信号长度
  chunk_size: 12000
  # 数据加载线程数
  num_workers: 32
  # 验证集采样比例
  val_ratio: 0.5
  # 损失日志记录间隔步数
  loss_log_interval: 10
  # 检查点保存路径
  checkpoint_path: "models_old/nanopore_signal_tokenizer.pth.spoch26000.pth"
  # CNN 类型
  cnn_type: 0
  # prefetch_factor (不在 shell 脚本中，使用默认值)
  prefetch_factor: 64

# 日志和验证相关配置
logging:
  # 是否启用 codebook 使用率评估
  do_evaluate: true
  # 是否使用 wandb
  use_wandb: true # 脚本中未明确传参，但代码默认为 True
  # wandb 项目名
  wandb_project: "nanopore_vq" # 代码中默认值
  # wandb 运行名
  wandb_name: "train_cnn0"

# 学习率调度器相关配置
scheduler:
  # 调度器类型
  lr_scheduler_type: "cosine" # 代码中默认值
  # 预热步数
  warmup_steps: 100
  # 预热开始因子
  warmup_start_factor: 0.01
  # 预热结束因子
  warmup_end_factor: 0.1
  # 主调度器结束因子
  main_scheduler_end_factor: 1.0e-05 # 代码中默认值

# 检查点相关配置
checkpointing:
  # 每隔多少个 epoch 保存一次检查点
  save_checkpoint_every_epoch: 1 # 对应脚本中的 SAVE_CHECKPOINT_INTERVAL
